<html>
<head>	<link rel="stylesheet" type="text/css" href="hipsleek.css" />	<script type="text/javascript" src="hipsleek.js"></script></head>
<body>
<h1>./hip/array/arr_max.java</h1>
<ul class="TreeView" id="ProofTree"><li class="Collapsed progsource">Source<ul><table><tr id="L1" class="OddSourceLine"><td>1</td><td><pre>/**</pre></td></tr>
<tr id="L2" class="EvenSourceLine"><td>2</td><td><pre> * Find the maximum value of the array.</pre></td></tr>
<tr id="L3" class="OddSourceLine"><td>3</td><td><pre> * </pre></td></tr>
<tr id="L4" class="EvenSourceLine"><td>4</td><td><pre> * @author Vu An Hoa</pre></td></tr>
<tr id="L5" class="OddSourceLine"><td>5</td><td><pre> */</pre></td></tr>
<tr id="L6" class="EvenSourceLine"><td>6</td><td><pre></pre></td></tr>
<tr id="L7" class="OddSourceLine"><td>7</td><td><pre>relation nonzero(int a) == </pre></td></tr>
<tr id="L8" class="EvenSourceLine"><td>8</td><td><pre>	exists (b : b < a).</pre></td></tr>
<tr id="L9" class="OddSourceLine"><td>9</td><td><pre></pre></td></tr>
<tr id="L10" class="EvenSourceLine"><td>10</td><td><pre>relation upperbnd(int[] a, int i, int j, int s) == </pre></td></tr>
<tr id="L11" class="OddSourceLine"><td>11</td><td><pre>	(i > j | forall ( k : (k < i | k > j | i <= k & k <= j & a[k] <= s))).  </pre></td></tr>
<tr id="L12" class="EvenSourceLine"><td>12</td><td><pre></pre></td></tr>
<tr id="L13" class="OddSourceLine"><td>13</td><td><pre>// relation upper_bound_array(int[] a, int i, int j, int s) == (i > j | i <= j & a[i] <= s & upper_bound_array(a,i+1,j,s)).</pre></td></tr>
<tr id="L14" class="EvenSourceLine"><td>14</td><td><pre></pre></td></tr>
<tr id="L15" class="OddSourceLine"><td>15</td><td><pre>int max_value_of_array(int[] a, int i, int j) </pre></td></tr>
<tr id="L16" class="EvenSourceLine"><td>16</td><td><pre>	requires dom(a,i,j) & i <= j</pre></td></tr>
<tr id="L17" class="OddSourceLine"><td>17</td><td><pre>	ensures upperbnd(a, i, j, res);</pre></td></tr>
<tr id="L18" class="EvenSourceLine"><td>18</td><td><pre>{</pre></td></tr>
<tr id="L19" class="OddSourceLine"><td>19</td><td><pre>	assume dom(a',i,j); </pre></td></tr>
<tr id="L20" class="EvenSourceLine"><td>20</td><td><pre>    if (i == j)</pre></td></tr>
<tr id="L21" class="OddSourceLine"><td>21</td><td><pre>		return a[i];</pre></td></tr>
<tr id="L22" class="EvenSourceLine"><td>22</td><td><pre>	else {</pre></td></tr>
<tr id="L23" class="OddSourceLine"><td>23</td><td><pre>			int m = max_value_of_array(a,i+1,j);</pre></td></tr>
<tr id="L24" class="EvenSourceLine"><td>24</td><td><pre>			if (m > a[i])</pre></td></tr>
<tr id="L25" class="OddSourceLine"><td>25</td><td><pre>				return m;</pre></td></tr>
<tr id="L26" class="EvenSourceLine"><td>26</td><td><pre>			else</pre></td></tr>
<tr id="L27" class="OddSourceLine"><td>27</td><td><pre>				return a[i];</pre></td></tr>
<tr id="L28" class="EvenSourceLine"><td>28</td><td><pre>        }</pre></td></tr>
<tr id="L29" class="OddSourceLine"><td>29</td><td><pre>}</pre></td></tr>
</table></ul></li><li class="Collapsed proc">
Procedure max_value_of_array<ul><li class="Collapsed procdef">Internal representation
<ul>int max_value_of_array$int[]~int~int(  int[] a,  int i,  int j)<br/>
static  EBase true &amp; dom(a,i,j) &amp; i&lt;=j &amp; {FLOW,(31,31)=__norm}<br/>
         EAssume 1::<br/>
           true &amp; upperbnd(a,i,j,res) &amp; {FLOW,(31,31)=__norm}<br/>
dynamic  []<br/>
68:: assume  true &amp; dom(a&apos;,i,j) &amp; {FLOW,(31,31)=__norm};<br/>
boolean v_bool_20_621;<br/>
v_bool_20_621 = {<br/>
77::eq___$int~int(i,j)<br/>
};<br/>
69::if (v_bool_20_621) LABEL! 69,0: int v_int_21_614;<br/>
v_int_21_614 = {<br/>
array_get_elm_at___1d$int[]~int(a,i)<br/>
};<br/>
76::return v_int_21_614<br/>
else LABEL! 69,1: int m_41;<br/>
m_41 = {<br/>
int v_int_23_616;<br/>
v_int_23_616 = {<br/>
int v_int_23_615;<br/>
v_int_23_615 = 1;<br/>
71::add___$int~int(i,v_int_23_615)<br/>
};<br/>
70::max_value_of_array$int[]~int~int(a,v_int_23_616,j) rec<br/>
};<br/>
boolean v_bool_24_620;<br/>
v_bool_24_620 = {<br/>
int v_int_24_617;<br/>
v_int_24_617 = {<br/>
array_get_elm_at___1d$int[]~int(a,i)<br/>
};<br/>
75::gt___$int~int(m_41,v_int_24_617)<br/>
};<br/>
72::if (v_bool_24_620) LABEL! 72,0: int v_int_25_618;<br/>
v_int_25_618 = m_41;<br/>
74::return v_int_25_618<br/>
else LABEL! 72,1: int v_int_27_619;<br/>
v_int_27_619 = {<br/>
array_get_elm_at___1d$int[]~int(a,i)<br/>
};<br/>
73::return v_int_27_619<br/>
<br/>
<br/>
<br/>
{(15,0),(0,-1)}<br/>
</ul></li><li class="Collapsed assert">
Assertion at <a href="#L19">line 19</a> holds
<ul></ul></li>
<li class="Collapsed pre">
Memory safety of array access at line <a href="#L21">line 21</a><ul><li class="Collapsed pureimplyvalid">Verification condition
<ul>(ahaub &le; ahaub &and; dom(a,ahaub,ahaub))  &#8866;   &exist; ahalb_640  &exist; ahaub_641 (dom(a,ahalb_640,ahaub_641) &and; ahalb_640 &le; ahaub &and; ahaub &le; ahaub_641)
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun a () (Array Int Int))<br/>
(declare-fun ahaub () Int)<br/>
;Relations declarations<br/>
(declare-fun dom ((Array Int Int) Int Int) Bool)<br/>
;Axioms assertions<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
;Antecedent<br/>
(assert (&lt;= ahaub ahaub))<br/>
(assert (dom a ahaub ahaub))<br/>
;Negation of Consequence<br/>
(assert (not (exists ((ahalb_640 Int)) (exists ((ahaub_641 Int)) (and (dom a ahalb_640 ahaub_641) (and (&lt;= ahalb_640 ahaub) (&lt;= ahaub ahaub_641)))))))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
</ul></li>
<li class="Collapsed pre">
Precondition of procedure call 70::max_value_of_array$int[]~int~int(a,v_int_23_616,j) rec at <a href="#L23">line 23</a> holds<ul><li class="Collapsed pureimplyvalid">Verification condition
<ul>(i &le; j &and; dom(a,i,j) &and; i &ne; j &and; v_int_23_616' = 1 + i)  &#8866;  dom(a,v_int_23_616',j)
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun i () Int)<br/>
(declare-fun a () (Array Int Int))<br/>
(declare-fun v_int_23_616_primed () Int)<br/>
(declare-fun j () Int)<br/>
;Relations declarations<br/>
(declare-fun dom ((Array Int Int) Int Int) Bool)<br/>
;Axioms assertions<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
;Antecedent<br/>
(assert (&lt;= i j))<br/>
(assert (dom a i j))<br/>
(assert (not (= i j)))<br/>
(assert (= v_int_23_616_primed (+ 1 i)))<br/>
;Negation of Consequence<br/>
(assert (not (dom a v_int_23_616_primed j)))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
<li class="Collapsed pureimplyvalid">Verification condition
<ul>(i &le; j &and; dom(a,i,j) &and; i &ne; j &and; v_int_23_616' = 1 + i)  &#8866;  v_int_23_616' &le; j
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun i () Int)<br/>
(declare-fun v_int_23_616_primed () Int)<br/>
(declare-fun j () Int)<br/>
;Relations declarations<br/>
;Axioms assertions<br/>
;Antecedent<br/>
(assert (&lt;= i j))<br/>
(assert (not (= i j)))<br/>
(assert (= v_int_23_616_primed (+ 1 i)))<br/>
;Negation of Consequence<br/>
(assert (not (&lt;= v_int_23_616_primed j)))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
</ul></li>
<li class="Collapsed pre">
Memory safety of array access at line <a href="#L24">line 24</a><ul><li class="Collapsed pureimplyvalid">Verification condition
<ul>(ahalb &le; ahaub &and; dom(a,ahalb,ahaub) &and; ahalb &ne; ahaub &and; upperbnd(a,1 + ahalb,ahaub,m_41'))  &#8866;   &exist; ahalb_660  &exist; ahaub_661 (dom(a,ahalb_660,ahaub_661) &and; ahalb_660 &le; ahalb &and; ahalb &le; ahaub_661)
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun ahaub () Int)<br/>
(declare-fun m_41_primed () Int)<br/>
(declare-fun a () (Array Int Int))<br/>
(declare-fun ahalb () Int)<br/>
;Relations declarations<br/>
(declare-fun dom ((Array Int Int) Int Int) Bool)<br/>
(declare-fun upperbnd ((Array Int Int) Int Int Int) Bool)<br/>
;Axioms assertions<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
(assert (forall ((i Int) (j Int) (a (Array Int Int)) (s Int)) (= (upperbnd a i j s) (or (&gt; i j) (forall ((k Int)) (or (&lt; k i) (or (&gt; k j) (and (&lt;= i k) (and (&lt;= k j) (&lt;= (select a k) s))))))))))<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
;Antecedent<br/>
(assert (&lt;= ahalb ahaub))<br/>
(assert (dom a ahalb ahaub))<br/>
(assert (not (= ahalb ahaub)))<br/>
(assert (upperbnd a (+ 1 ahalb) ahaub m_41_primed))<br/>
;Negation of Consequence<br/>
(assert (not (exists ((ahalb_660 Int)) (exists ((ahaub_661 Int)) (and (dom a ahalb_660 ahaub_661) (and (&lt;= ahalb_660 ahalb) (&lt;= ahalb ahaub_661)))))))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
</ul></li>
<li class="Collapsed pre">
Memory safety of array access at line <a href="#L27">line 27</a><ul><li class="Collapsed pureimplyvalid">Verification condition
<ul>(ahalb_670 &ne; ahaub_671 &and; upperbnd(a,1 + ahalb_670,ahaub_671,m_41') &and; dom(a,ahalb_670,ahaub_671) &and; ahalb_670 &le; ahalb_670 &and; ahalb_670 &le; ahaub_671 &and; m_41' &le; a[ahalb_670])  &#8866;   &exist; ahalb_676  &exist; ahaub_677 (dom(a,ahalb_676,ahaub_677) &and; ahalb_676 &le; ahalb_670 &and; ahalb_670 &le; ahaub_677)
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun ahaub_671 () Int)<br/>
(declare-fun m_41_primed () Int)<br/>
(declare-fun a () (Array Int Int))<br/>
(declare-fun ahalb_670 () Int)<br/>
;Relations declarations<br/>
(declare-fun dom ((Array Int Int) Int Int) Bool)<br/>
(declare-fun upperbnd ((Array Int Int) Int Int Int) Bool)<br/>
;Axioms assertions<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
(assert (forall ((i Int) (j Int) (a (Array Int Int)) (s Int)) (= (upperbnd a i j s) (or (&gt; i j) (forall ((k Int)) (or (&lt; k i) (or (&gt; k j) (and (&lt;= i k) (and (&lt;= k j) (&lt;= (select a k) s))))))))))<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
;Antecedent<br/>
(assert (not (= ahalb_670 ahaub_671)))<br/>
(assert (upperbnd a (+ 1 ahalb_670) ahaub_671 m_41_primed))<br/>
(assert (dom a ahalb_670 ahaub_671))<br/>
(assert (&lt;= ahalb_670 ahalb_670))<br/>
(assert (&lt;= ahalb_670 ahaub_671))<br/>
(assert (&lt;= m_41_primed (select a ahalb_670)))<br/>
;Negation of Consequence<br/>
(assert (not (exists ((ahalb_676 Int)) (exists ((ahaub_677 Int)) (and (dom a ahalb_676 ahaub_677) (and (&lt;= ahalb_676 ahalb_670) (&lt;= ahalb_670 ahaub_677)))))))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
</ul></li>
<li class="Collapsed post">
Procedure post-condition holds
<ul><li class="Collapsed pureimplyvalid">Verification condition
<ul>(dom(a,ahaub,ahaub) &and; ahaub &le; ahaub &and; v_int_21_614' = a[ahaub])  &#8866;  upperbnd(a,ahaub,ahaub,v_int_21_614')
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun a () (Array Int Int))<br/>
(declare-fun ahaub () Int)<br/>
(declare-fun v_int_21_614_primed () Int)<br/>
;Relations declarations<br/>
(declare-fun upperbnd ((Array Int Int) Int Int Int) Bool)<br/>
;Axioms assertions<br/>
(assert (forall ((i Int) (j Int) (a (Array Int Int)) (s Int)) (= (upperbnd a i j s) (or (&gt; i j) (forall ((k Int)) (or (&lt; k i) (or (&gt; k j) (and (&lt;= i k) (and (&lt;= k j) (&lt;= (select a k) s))))))))))<br/>
;Antecedent<br/>
(assert (&lt;= ahaub ahaub))<br/>
(assert (= v_int_21_614_primed (select a ahaub)))<br/>
;Negation of Consequence<br/>
(assert (not (upperbnd a ahaub ahaub v_int_21_614_primed)))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
<li class="Collapsed pureimplyvalid">Verification condition
<ul>(ahalb &ne; ahaub &and; upperbnd(a,1 + ahalb,ahaub,m_41') &and; dom(a,ahalb,ahaub) &and; ahalb &le; ahalb &and; ahalb &le; ahaub &and; a[ahalb] &lt; m_41')  &#8866;  upperbnd(a,ahalb,ahaub,m_41')
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun a () (Array Int Int))<br/>
(declare-fun ahalb () Int)<br/>
(declare-fun ahaub () Int)<br/>
(declare-fun m_41_primed () Int)<br/>
;Relations declarations<br/>
(declare-fun upperbnd ((Array Int Int) Int Int Int) Bool)<br/>
;Axioms assertions<br/>
(assert (forall ((i Int) (j Int) (a (Array Int Int)) (s Int)) (= (upperbnd a i j s) (or (&gt; i j) (forall ((k Int)) (or (&lt; k i) (or (&gt; k j) (and (&lt;= i k) (and (&lt;= k j) (&lt;= (select a k) s))))))))))<br/>
(assert (forall ((i Int) (j Int) (a (Array Int Int)) (s Int)) (= (upperbnd a i j s) (or (&gt; i j) (forall ((k Int)) (or (&lt; k i) (or (&gt; k j) (and (&lt;= i k) (and (&lt;= k j) (&lt;= (select a k) s))))))))))<br/>
;Antecedent<br/>
(assert (not (= ahalb ahaub)))<br/>
(assert (upperbnd a (+ 1 ahalb) ahaub m_41_primed))<br/>
(assert (&lt;= ahalb ahalb))<br/>
(assert (&lt;= ahalb ahaub))<br/>
(assert (&lt; (select a ahalb) m_41_primed))<br/>
;Negation of Consequence<br/>
(assert (not (upperbnd a ahalb ahaub m_41_primed)))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
<li class="Collapsed pureimplyvalid">Verification condition
<ul>(ahalb_670 &ne; ahaub_671 &and; upperbnd(a,1 + ahalb_670,ahaub_671,m_41') &and; m_41' &le; a[ahalb_670] &and; dom(a,ahalb_670,ahaub_671) &and; ahalb_670 &le; ahalb_670 &and; ahalb_670 &le; ahaub_671 &and; v_int_27_619' = a[ahalb_670])  &#8866;  upperbnd(a,ahalb_670,ahaub_671,v_int_27_619')
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun m_41_primed () Int)<br/>
(declare-fun a () (Array Int Int))<br/>
(declare-fun ahalb_670 () Int)<br/>
(declare-fun ahaub_671 () Int)<br/>
(declare-fun v_int_27_619_primed () Int)<br/>
;Relations declarations<br/>
(declare-fun upperbnd ((Array Int Int) Int Int Int) Bool)<br/>
;Axioms assertions<br/>
(assert (forall ((i Int) (j Int) (a (Array Int Int)) (s Int)) (= (upperbnd a i j s) (or (&gt; i j) (forall ((k Int)) (or (&lt; k i) (or (&gt; k j) (and (&lt;= i k) (and (&lt;= k j) (&lt;= (select a k) s))))))))))<br/>
(assert (forall ((i Int) (j Int) (a (Array Int Int)) (s Int)) (= (upperbnd a i j s) (or (&gt; i j) (forall ((k Int)) (or (&lt; k i) (or (&gt; k j) (and (&lt;= i k) (and (&lt;= k j) (&lt;= (select a k) s))))))))))<br/>
;Antecedent<br/>
(assert (not (= ahalb_670 ahaub_671)))<br/>
(assert (upperbnd a (+ 1 ahalb_670) ahaub_671 m_41_primed))<br/>
(assert (&lt;= m_41_primed (select a ahalb_670)))<br/>
(assert (&lt;= ahalb_670 ahalb_670))<br/>
(assert (&lt;= ahalb_670 ahaub_671))<br/>
(assert (= v_int_27_619_primed (select a ahalb_670)))<br/>
;Negation of Consequence<br/>
(assert (not (upperbnd a ahalb_670 ahaub_671 v_int_27_619_primed)))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
</ul></li>
</ul></li>
<li class="Collapsed term">Termination of all procedures
<ul></ul></li>
</ul>
<script>
	SetupTreeView("ProofTree");
</script>
</body>
</html>