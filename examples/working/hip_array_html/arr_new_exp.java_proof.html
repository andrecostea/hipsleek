<html>
<head>	<link rel="stylesheet" type="text/css" href="hipsleek.css" />	<script type="text/javascript" src="hipsleek.js"></script></head>
<body>
<h1>./hip/array/arr_new_exp.java</h1>
<ul class="TreeView" id="ProofTree"><li class="Collapsed progsource">Source<ul><table><tr id="L1" class="OddSourceLine"><td>1</td><td><pre>/**</pre></td></tr>
<tr id="L2" class="EvenSourceLine"><td>2</td><td><pre> * Test the array allocation using new expression.</pre></td></tr>
<tr id="L3" class="OddSourceLine"><td>3</td><td><pre> * </pre></td></tr>
<tr id="L4" class="EvenSourceLine"><td>4</td><td><pre> * @author Vu An Hoa</pre></td></tr>
<tr id="L5" class="OddSourceLine"><td>5</td><td><pre> */</pre></td></tr>
<tr id="L6" class="EvenSourceLine"><td>6</td><td><pre>int main()</pre></td></tr>
<tr id="L7" class="OddSourceLine"><td>7</td><td><pre>	requires true</pre></td></tr>
<tr id="L8" class="EvenSourceLine"><td>8</td><td><pre>	ensures res = 4;</pre></td></tr>
<tr id="L9" class="OddSourceLine"><td>9</td><td><pre>{</pre></td></tr>
<tr id="L10" class="EvenSourceLine"><td>10</td><td><pre>	int[] a;</pre></td></tr>
<tr id="L11" class="OddSourceLine"><td>11</td><td><pre>	// new expression will add domain constraint: dom(a',0,4) </pre></td></tr>
<tr id="L12" class="EvenSourceLine"><td>12</td><td><pre>	a = new int[5];</pre></td></tr>
<tr id="L13" class="OddSourceLine"><td>13</td><td><pre>	a[0] = 0;</pre></td></tr>
<tr id="L14" class="EvenSourceLine"><td>14</td><td><pre>	a[1] = 1;</pre></td></tr>
<tr id="L15" class="OddSourceLine"><td>15</td><td><pre>	a[2] = 3;</pre></td></tr>
<tr id="L16" class="EvenSourceLine"><td>16</td><td><pre>	int x = a[0] + a[1] + a[2];</pre></td></tr>
<tr id="L17" class="OddSourceLine"><td>17</td><td><pre>	return x;</pre></td></tr>
<tr id="L18" class="EvenSourceLine"><td>18</td><td><pre>}</pre></td></tr>
</table></ul></li><li class="Collapsed proc">
Procedure main<ul><li class="Collapsed procdef">Internal representation
<ul>int main$()<br/>
static  EBase true &amp; true &amp; {FLOW,(30,30)=__norm}<br/>
         EAssume 1::<br/>
           true &amp; res=4 &amp; {FLOW,(30,30)=__norm}<br/>
dynamic  []<br/>
int[] a_40;<br/>
a_40 = Empty Array;<br/>
a_40 = {<br/>
int v_int_12_601;<br/>
v_int_12_601 = 5;<br/>
aalloc___$int(v_int_12_601)<br/>
};<br/>
a_40 = {<br/>
int v_int_13_603;<br/>
v_int_13_603 = 0;<br/>
int v_int_13_602;<br/>
v_int_13_602 = 0;<br/>
71::update___1d$int~int[]~int(v_int_13_603,a_40,v_int_13_602)<br/>
};<br/>
a_40 = {<br/>
int v_int_14_605;<br/>
v_int_14_605 = 1;<br/>
int v_int_14_604;<br/>
v_int_14_604 = 1;<br/>
72::update___1d$int~int[]~int(v_int_14_605,a_40,v_int_14_604)<br/>
};<br/>
a_40 = {<br/>
int v_int_15_607;<br/>
v_int_15_607 = 3;<br/>
int v_int_15_606;<br/>
v_int_15_606 = 2;<br/>
73::update___1d$int~int[]~int(v_int_15_607,a_40,v_int_15_606)<br/>
};<br/>
int x_41;<br/>
x_41 = {<br/>
int v_int_16_614;<br/>
v_int_16_614 = {<br/>
int v_int_16_611;<br/>
v_int_16_611 = {<br/>
int v_int_16_608;<br/>
v_int_16_608 = 0;<br/>
array_get_elm_at___1d$int[]~int(a_40,v_int_16_608)<br/>
};<br/>
int v_int_16_610;<br/>
v_int_16_610 = {<br/>
int v_int_16_609;<br/>
v_int_16_609 = 1;<br/>
array_get_elm_at___1d$int[]~int(a_40,v_int_16_609)<br/>
};<br/>
75::add___$int~int(v_int_16_611,v_int_16_610)<br/>
};<br/>
int v_int_16_613;<br/>
v_int_16_613 = {<br/>
int v_int_16_612;<br/>
v_int_16_612 = 2;<br/>
array_get_elm_at___1d$int[]~int(a_40,v_int_16_612)<br/>
};<br/>
74::add___$int~int(v_int_16_614,v_int_16_613)<br/>
};<br/>
int v_int_17_615;<br/>
v_int_17_615 = x_41;<br/>
76::return v_int_17_615<br/>
<br/>
{(6,0),(0,-1)}<br/>
</ul></li><li class="Collapsed pre">
Memory safety of array update at line <a href="#L13">line 13</a><ul><li class="Collapsed pureimplyvalid">Verification condition
<ul>dom(a_40',0,5 - 1)  &#8866;   &exist; ahalb_637  &exist; ahaub_638 (dom(a_40',ahalb_637,ahaub_638) &and; ahalb_637 &le; 0 &and; 0 &le; ahaub_638)
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun a_40_primed () (Array Int Int))<br/>
;Relations declarations<br/>
(declare-fun dom ((Array Int Int) Int Int) Bool)<br/>
;Axioms assertions<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
;Antecedent<br/>
(assert (dom a_40_primed 0 (- 5 1)))<br/>
;Negation of Consequence<br/>
(assert (not (exists ((ahalb_637 Int)) (exists ((ahaub_638 Int)) (and (dom a_40_primed ahalb_637 ahaub_638) (and (&lt;= ahalb_637 0) (&lt;= 0 ahaub_638)))))))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
</ul></li>
<li class="Collapsed pre">
Memory safety of array update at line <a href="#L14">line 14</a><ul><li class="Collapsed pureimplyvalid">Verification condition
<ul>(0 &le; ahaub_645 &and; dom(a_652,0,ahaub_645) &and; 5 - 1 = ahaub_645 &and; dom(a_652,0,5 - 1) &and; dom(a_40',0,ahaub_645) &and; update_array_1d(a_652,a_40',0,0))  &#8866;   &exist; ahalb_653  &exist; ahaub_654 (dom(a_40',ahalb_653,ahaub_654) &and; ahalb_653 &le; 1 &and; 1 &le; ahaub_654)
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun ahaub_645 () Int)<br/>
(declare-fun a_652 () (Array Int Int))<br/>
(declare-fun a_40_primed () (Array Int Int))<br/>
;Relations declarations<br/>
(declare-fun dom ((Array Int Int) Int Int) Bool)<br/>
;Axioms assertions<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
;Antecedent<br/>
(assert (&lt;= 0 ahaub_645))<br/>
(assert (dom a_652 0 ahaub_645))<br/>
(assert (= (- 5 1) ahaub_645))<br/>
(assert (dom a_652 0 (- 5 1)))<br/>
(assert (dom a_40_primed 0 ahaub_645))<br/>
(assert (= a_40_primed (store a_652 0 0)))<br/>
;Negation of Consequence<br/>
(assert (not (exists ((ahalb_653 Int)) (exists ((ahaub_654 Int)) (and (dom a_40_primed ahalb_653 ahaub_654) (and (&lt;= ahalb_653 1) (&lt;= 1 ahaub_654)))))))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
</ul></li>
<li class="Collapsed pre">
Memory safety of array update at line <a href="#L15">line 15</a><ul><li class="Collapsed pureimplyvalid">Verification condition
<ul>(dom(a_652,0,5 - 1) &and; 1 &le; ahaub_661 &and; dom(a_668,0,ahaub_661) &and; update_array_1d(a_652,a_668,0,0) &and; 0 &le; ahaub_661 &and; dom(a_652,0,ahaub_661) &and; 5 - 1 = ahaub_661 &and; dom(a_40',0,ahaub_661) &and; update_array_1d(a_668,a_40',1,1))  &#8866;   &exist; ahalb_669  &exist; ahaub_670 (dom(a_40',ahalb_669,ahaub_670) &and; ahalb_669 &le; 2 &and; 2 &le; ahaub_670)
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun a_652 () (Array Int Int))<br/>
(declare-fun ahaub_661 () Int)<br/>
(declare-fun a_668 () (Array Int Int))<br/>
(declare-fun a_40_primed () (Array Int Int))<br/>
;Relations declarations<br/>
(declare-fun dom ((Array Int Int) Int Int) Bool)<br/>
;Axioms assertions<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
;Antecedent<br/>
(assert (dom a_652 0 (- 5 1)))<br/>
(assert (&lt;= 1 ahaub_661))<br/>
(assert (dom a_668 0 ahaub_661))<br/>
(assert (= a_668 (store a_652 0 0)))<br/>
(assert (&lt;= 0 ahaub_661))<br/>
(assert (dom a_652 0 ahaub_661))<br/>
(assert (= (- 5 1) ahaub_661))<br/>
(assert (dom a_40_primed 0 ahaub_661))<br/>
(assert (= a_40_primed (store a_668 1 1)))<br/>
;Negation of Consequence<br/>
(assert (not (exists ((ahalb_669 Int)) (exists ((ahaub_670 Int)) (and (dom a_40_primed ahalb_669 ahaub_670) (and (&lt;= ahalb_669 2) (&lt;= 2 ahaub_670)))))))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
</ul></li>
<li class="Collapsed pre">
Memory safety of array access at line <a href="#L16">line 16</a><ul><li class="Collapsed pureimplyvalid">Verification condition
<ul>(dom(a_652,0,5 - 1) &and; 2 &le; ahaub_675 &and; dom(a_680,0,ahaub_675) &and; update_array_1d(a_668,a_680,1,1) &and; 1 &le; ahaub_675 &and; dom(a_668,0,ahaub_675) &and; update_array_1d(a_652,a_668,0,0) &and; 0 &le; ahaub_675 &and; dom(a_652,0,ahaub_675) &and; 5 - 1 = ahaub_675 &and; dom(a_40',0,ahaub_675) &and; update_array_1d(a_680,a_40',3,2))  &#8866;   &exist; ahalb_681  &exist; ahaub_682 (dom(a_40',ahalb_681,ahaub_682) &and; ahalb_681 &le; 0 &and; 0 &le; ahaub_682)
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun a_668 () (Array Int Int))<br/>
(declare-fun a_652 () (Array Int Int))<br/>
(declare-fun ahaub_675 () Int)<br/>
(declare-fun a_680 () (Array Int Int))<br/>
(declare-fun a_40_primed () (Array Int Int))<br/>
;Relations declarations<br/>
(declare-fun dom ((Array Int Int) Int Int) Bool)<br/>
;Axioms assertions<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
;Antecedent<br/>
(assert (dom a_652 0 (- 5 1)))<br/>
(assert (&lt;= 2 ahaub_675))<br/>
(assert (dom a_680 0 ahaub_675))<br/>
(assert (= a_680 (store a_668 1 1)))<br/>
(assert (&lt;= 1 ahaub_675))<br/>
(assert (dom a_668 0 ahaub_675))<br/>
(assert (= a_668 (store a_652 0 0)))<br/>
(assert (&lt;= 0 ahaub_675))<br/>
(assert (dom a_652 0 ahaub_675))<br/>
(assert (= (- 5 1) ahaub_675))<br/>
(assert (dom a_40_primed 0 ahaub_675))<br/>
(assert (= a_40_primed (store a_680 2 3)))<br/>
;Negation of Consequence<br/>
(assert (not (exists ((ahalb_681 Int)) (exists ((ahaub_682 Int)) (and (dom a_40_primed ahalb_681 ahaub_682) (and (&lt;= ahalb_681 0) (&lt;= 0 ahaub_682)))))))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
</ul></li>
<li class="Collapsed pre">
Memory safety of array access at line <a href="#L16">line 16</a><ul><li class="Collapsed pureimplyvalid">Verification condition
<ul>(dom(a_652,0,5 - 1) &and; 0 &le; ahaub_686 &and; 2 &le; ahaub_686 &and; dom(a_680,0,ahaub_686) &and; update_array_1d(a_668,a_680,1,1) &and; 1 &le; ahaub_686 &and; dom(a_668,0,ahaub_686) &and; update_array_1d(a_652,a_668,0,0) &and; dom(a_652,0,ahaub_686) &and; 5 - 1 = ahaub_686 &and; update_array_1d(a_680,a_40',3,2) &and; dom(a_40',0,ahaub_686) &and; v_int_16_611' = a_40'[0])  &#8866;   &exist; ahalb_691  &exist; ahaub_692 (dom(a_40',ahalb_691,ahaub_692) &and; ahalb_691 &le; 1 &and; 1 &le; ahaub_692)
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun a_668 () (Array Int Int))<br/>
(declare-fun a_652 () (Array Int Int))<br/>
(declare-fun a_680 () (Array Int Int))<br/>
(declare-fun ahaub_686 () Int)<br/>
(declare-fun v_int_16_611_primed () Int)<br/>
(declare-fun a_40_primed () (Array Int Int))<br/>
;Relations declarations<br/>
(declare-fun dom ((Array Int Int) Int Int) Bool)<br/>
;Axioms assertions<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
;Antecedent<br/>
(assert (dom a_652 0 (- 5 1)))<br/>
(assert (&lt;= 0 ahaub_686))<br/>
(assert (&lt;= 2 ahaub_686))<br/>
(assert (dom a_680 0 ahaub_686))<br/>
(assert (= a_680 (store a_668 1 1)))<br/>
(assert (&lt;= 1 ahaub_686))<br/>
(assert (dom a_668 0 ahaub_686))<br/>
(assert (= a_668 (store a_652 0 0)))<br/>
(assert (dom a_652 0 ahaub_686))<br/>
(assert (= (- 5 1) ahaub_686))<br/>
(assert (= a_40_primed (store a_680 2 3)))<br/>
(assert (dom a_40_primed 0 ahaub_686))<br/>
(assert (= v_int_16_611_primed (select a_40_primed 0)))<br/>
;Negation of Consequence<br/>
(assert (not (exists ((ahalb_691 Int)) (exists ((ahaub_692 Int)) (and (dom a_40_primed ahalb_691 ahaub_692) (and (&lt;= ahalb_691 1) (&lt;= 1 ahaub_692)))))))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
</ul></li>
<li class="Collapsed pre">
Memory safety of array access at line <a href="#L16">line 16</a><ul><li class="Collapsed pureimplyvalid">Verification condition
<ul>(dom(a_652,0,5 - 1) &and; 1 &le; ahaub_701 &and; 0 &le; ahaub_701 &and; 2 &le; ahaub_701 &and; dom(a_680,0,ahaub_701) &and; update_array_1d(a_668,a_680,1,1) &and; dom(a_668,0,ahaub_701) &and; update_array_1d(a_652,a_668,0,0) &and; dom(a_652,0,ahaub_701) &and; 5 - 1 = ahaub_701 &and; update_array_1d(a_680,a_40',3,2) &and; dom(a_40',0,ahaub_701) &and; v_int_16_614' = a_40'[1] + a_40'[0])  &#8866;   &exist; ahalb_706  &exist; ahaub_707 (dom(a_40',ahalb_706,ahaub_707) &and; ahalb_706 &le; 2 &and; 2 &le; ahaub_707)
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun a_668 () (Array Int Int))<br/>
(declare-fun a_652 () (Array Int Int))<br/>
(declare-fun a_680 () (Array Int Int))<br/>
(declare-fun ahaub_701 () Int)<br/>
(declare-fun v_int_16_614_primed () Int)<br/>
(declare-fun a_40_primed () (Array Int Int))<br/>
;Relations declarations<br/>
(declare-fun dom ((Array Int Int) Int Int) Bool)<br/>
;Axioms assertions<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
(assert (forall ((low Int) (high Int) (a (Array Int Int)) (l Int) (h Int)) (=&gt; (and (dom a low high) (and (&lt;= low l) (&lt;= h high))) (dom a l h))))<br/>
;Antecedent<br/>
(assert (dom a_652 0 (- 5 1)))<br/>
(assert (&lt;= 1 ahaub_701))<br/>
(assert (&lt;= 0 ahaub_701))<br/>
(assert (&lt;= 2 ahaub_701))<br/>
(assert (dom a_680 0 ahaub_701))<br/>
(assert (= a_680 (store a_668 1 1)))<br/>
(assert (dom a_668 0 ahaub_701))<br/>
(assert (= a_668 (store a_652 0 0)))<br/>
(assert (dom a_652 0 ahaub_701))<br/>
(assert (= (- 5 1) ahaub_701))<br/>
(assert (= a_40_primed (store a_680 2 3)))<br/>
(assert (dom a_40_primed 0 ahaub_701))<br/>
(assert (= v_int_16_614_primed (+ (select a_40_primed 1) (select a_40_primed 0))))<br/>
;Negation of Consequence<br/>
(assert (not (exists ((ahalb_706 Int)) (exists ((ahaub_707 Int)) (and (dom a_40_primed ahalb_706 ahaub_707) (and (&lt;= ahalb_706 2) (&lt;= 2 ahaub_707)))))))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
</ul></li>
<li class="Collapsed post">
Procedure post-condition holds
<ul><li class="Collapsed pureimplyvalid">Verification condition
<ul>(dom(a_652,0,5 - 1) &and; 5 - 1 = ahaub_701 &and; dom(a_652,0,ahaub_701) &and; update_array_1d(a_652,a_668,0,0) &and; dom(a_668,0,ahaub_701) &and; update_array_1d(a_668,a_680,1,1) &and; dom(a_680,0,ahaub_701) &and; 0 &le; ahaub_701 &and; 1 &le; ahaub_701 &and; 2 &le; ahaub_701 &and; dom(a_40',0,ahaub_701) &and; update_array_1d(a_680,a_40',3,2) &and; x_41' = a_40'[2] + a_40'[1] + a_40'[0])  &#8866;  x_41' = 4
<li class="Collapsed proverinput">Input to prover Z3
<ul>(set-logic AUFNIA)<br/>
;Variables declarations<br/>
(declare-fun a_652 () (Array Int Int))<br/>
(declare-fun a_668 () (Array Int Int))<br/>
(declare-fun ahaub_701 () Int)<br/>
(declare-fun a_680 () (Array Int Int))<br/>
(declare-fun a_40_primed () (Array Int Int))<br/>
(declare-fun x_41_primed () Int)<br/>
;Relations declarations<br/>
;Axioms assertions<br/>
;Antecedent<br/>
(assert (= (- 5 1) ahaub_701))<br/>
(assert (= a_668 (store a_652 0 0)))<br/>
(assert (= a_680 (store a_668 1 1)))<br/>
(assert (&lt;= 0 ahaub_701))<br/>
(assert (&lt;= 1 ahaub_701))<br/>
(assert (&lt;= 2 ahaub_701))<br/>
(assert (= a_40_primed (store a_680 2 3)))<br/>
(assert (= x_41_primed (+ (select a_40_primed 2) (+ (select a_40_primed 1) (select a_40_primed 0)))))<br/>
;Negation of Consequence<br/>
(assert (not (= x_41_primed 4)))<br/>
(check-sat)</ul></li><li class="Collapsed proveroutput">Output of prover Z3
<ul>unsat</li></ul></ul></li>
</ul></li>
</ul></li>
<li class="Collapsed term">Termination of all procedures
<ul></ul></li>
</ul>
<script>
	SetupTreeView("ProofTree");
</script>
</body>
</html>