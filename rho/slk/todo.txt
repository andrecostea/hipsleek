# bug-3-ho-vars.slk (DONE)

 checkentail_exact x::cell<1>*y::cell<2> |- x::cell<3>*%P.

 why did this succeed? Did we forget to prove pure at the end?

 ho_vars: [P --> y::cell<flted_7_28>&flted_7_28=2 & flted_7_29=1&
           {FLOW,(4,5)=__norm#E}[]]
=================================================================
# bug-3a-ho-vars.slk (debatable issue) (DONE)

Residue:
 <1>emp&flted_4_15=2 & flted_4_16=1 & Anon_11=flted_4_16&{FLOW,(4,5)=__norm#E}[]
 ho_vars: [P --> y::cell<flted_4_15>&flted_4_15=2 & flted_4_16=1 & 
           Anon_11=flted_4_16&{FLOW,(4,5)=__norm#E}[]]

For instantiation, I think we should pick mainly heap + related pure?
Otherwise, I think we may pick up too much info?
=================================================================
# bug-3b

checkentail_exact x::cell<1>*y::cell<2> |- z::cell<3>*%P.

Entail 1: Fail.(may) cause:do_unmatched_rhs : HVar P

# Why did we not get a better error message on unmatched z::cell<3>?

Residue:
 <1>x::cell<flted_3_15> * y::cell<flted_3_14>&flted_3_14=2 & flted_3_15=1&{FLOW,(4,8)=__MayError#E}[]
[[ COND ==>  COND ==>  UnmatchedRHSData ==> ]]

>> The process_action on 
   COND =>[Prio:2COND =>[Prio:2UnmatchedRHSData =>  z::cell<flted_10_51>];
           Prio:2COND =>[Prio:2UnmatchedRHSData =>  HVar P]]
   always keeps the last result.

=================================================================
# bug-4 (DONE)

checkentail_exact x::cell<_> * %P |- %P * %Q.

# should succeed with %Q --> x::cell<_>

Residue:
 <1>x::cell<Anon_12> * (HVar P)&{FLOW,(4,8)=__MayError#E}[]
[[ COND ==>  COND ==>  UnmatchedRHSData ==> ]]

checkentail_exact  %P |- %P .

# should succeed with matching here..

Entail 2: Fail.(may) cause:do_unmatched_rhs : HVar P

Residue:
 <1>HVar P&{FLOW,(4,8)=__MayError#E}[]
[[ COND ==>  UnmatchedRHSData ==> ]]
=================================================================
# bug-4a

checkentail_exact  y::cell<_> * x::cell<3+2> |- %Q * x::cell<_> & x!=null.
print residue.

We may need to keep xpure of extracted term, e.g. y!=null, 
into residue of main expr.

Entail 1: Fail.(may) cause: true |-  y!=null. LOCS:[0;4] (may-bug)

Residue:
 <1>emp&flted_4_15=2+3 & Anon_12=flted_4_15&{FLOW,(4,8)=__MayError#E}[]
 ho_vars: [Q --> y::cell<Anon_11>&{FLOW,(4,5)=__norm#E}[]]
[[ SEARCH ==>  Match(x,x) ==>  COND ==>  UnmatchedRHSData ==> ]]

=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
=================================================================
