====================================================================
# vp/vex35a1.slk --ann-vp (DONE)

# to handle @ver_perm correctly ..

infer [@ver_post] @value[x] |- @full[x].
expect Fail.

infer [@ver_post] @value[x] |- @value[x].
expect Fail.

infer [@ver_post] @full[x] |- @full[x].
expect Valid.

infer [@ver_post] @full[x] |- @value[x].
expect Fail.

Unexpected: 1 2 4 
====================================================================
# vp/ex35d1-vp-post-err.ss --ann-vp (FIXED)

void inc5(int i)
 requires @value[i]
 ensures  @full[i]; //'@full[i] &
{
  i++;
}

valid but expect post error

need to add @ver_post prior to post-checking..
use Wrapper code & add this at typechecker.mk

Use this for check_post..

let wrap_ver_post f a =
  let save_fn () = infer_const_obj # is_ver_post in
  let set_fn () = infer_const_obj # set INF_VER_POST in
  let restore_fn f = if f then () else infer_const_obj # reset INF_VER_POST in
  wrap_gen save_fn set_fn restore_fn () f a

====================================================================
Add infer_object flags to --esl
====================================================================
make more vperm examples work

ex36 + ex37

error at: vperm/vperm_check.ss inc
error at: vperm/vperm_check.ss incCell
error at: vperm/vperm_check.ss test1
error at: vperm/vperm_check.ss test2
error at: vperm/vperm_check.ss test3
error at: vperm/vperm_check.ss test4
error at: vperm/task_decompose.ss inc
error at: vperm/task_decompose.ss creator
====================================================================
run-fast-test thread_hip

Starting sleek-hip_threads tests:
Starting hip tests:
Checking threads/motiv-example.ss (runs with extra options: --en-para --en-thrd-resource -tp redlog)
Checking threads/motiv-example2.ss (runs with extra options: --en-para --en-thrd-resource -tp redlog)
Checking threads/no-deadlock-nonlexical2.ss (runs with extra options: --en-para --en-thrd-resource -tp parahip --en-lsmu-infer)
error at: threads/no-deadlock-nonlexical2.ss main
error at: threads/no-deadlock-nonlexical2.ss thread1
error at: threads/no-deadlock-nonlexical2.ss thread2
Checking threads/no-deadlock-nonlexical.ss (runs with extra options: --en-para --en-thrd-resource -tp parahip --en-lsmu-infer)
error at: threads/no-deadlock-nonlexical.ss main
error at: threads/no-deadlock-nonlexical.ss thread1
error at: threads/no-deadlock-nonlexical.ss thread2
Checking threads/forkjoin.ss (runs with extra options: --en-para -tp parahip --en-lsmu-infer --en-thrd-resource)
error at: threads/forkjoin.ss func
error at: threads/forkjoin.ss main
Checking threads/cell4.ss (runs with extra options: --en-para -tp parahip --en-lsmu-infer --en-thrd-resource)
error at: threads/cell4.ss inc
error at: threads/cell4.ss main
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
====================================================================
