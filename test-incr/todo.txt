# ex21d3b.slk 

# should we allow weakening. can we check for similarity?

lemma_infer [U2,classic]
  self::app3<> -> U2(self,q) * q::node<_,null>.

U2(self_lem_17,q_112).
 <-- emp&self_lem_17=q_112
  or self_lem_17::node<Anon_127,q_128>@M * 
     U2(q_128,q_131) &q_128!=null 

lemma_test self::lseg<p> <-> self::U2<p>.

# test show that U2 can be weakened to lseg..

Entailing lemma lem_15: Fail. Details below:
	 "==>" implication: : Fail. (cex)(may) cause: OrL[
residue is forbidden.(1),
valid
]	 "<==" implication: : Valid.
================================================================
# ex21d3a.slk (Muoi : can we generate sleek-output.

lemma_infer [U2,classic]
  self::app3<> -> U2(self,q) * q::node<_,null>.

print sleek_cmd.

# this looks into residue for the inferred relational assumption
   which is then pretty printed.


data node {
	int val; 
	node next;	
}.

HeapPred U2(node x,node y).
HeapPred GP_133(node x,node y,node y).

relAssume
 emp&self_lem_17=q_112 --> U2(self_lem_17,q_112).

relAssume
 U2(q_128,q_131)& q_128!=null |#| 
   q_131::node<Anon_140,flted_29_138>@M&flted_29_138=null 
   --> GP_133(q_128,q_131,self_lem_17@NI).

relAssume
 self_lem_17::node<Anon_127,q_128>@M * 
   GP_133(q_128,q_131,self_lem_17@NI)&q_128!=null 
   --> U2(self_lem_17,q_131).
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
================================================================
